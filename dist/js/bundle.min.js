(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){var dimension,group,leftBarChart;function drawLeftChart(argument){var cf=crossfilter(sbpData);dimension=cf.dimension(function(d){return d["Partner/Organisation"]})}var pieLang,pieGender,pieLevel;var pieLangTitle="Language Requirements",pieGenderTitle="Deployments by Gender",pieLevelTitle="Deployments by Level";$("#piecharts").append('<div class="pie"><div><h3>'+pieLangTitle+'</h3><div id="pieLang"></div></div>');$("#piecharts").append('<div class="pie"><div><h3>'+pieGenderTitle+'</h3><div id="pieGender"></div></div>');$("#piecharts").append('<div class="pie"><div><h3>'+pieLevelTitle+'</h3><div id="pieLevel"></div></div>');function generatePieChart(data){if(pieLang==undefined){pieLang=c3.generate({bindto:"#pieLang",size:{width:250,height:200},data:{columns:[["FR",20],["EN",50],["ES",30]],type:"donut"}})}else{}if(pieGender==undefined){pieGender=c3.generate({bindto:"#pieGender",size:{width:250,height:200},data:{columns:[["Male",50],["Female",50]],type:"donut"}})}else{}if(pieLevel==undefined){pieLevel=c3.generate({bindto:"#pieLevel",size:{width:250,height:200},data:{columns:[["P3",50],["P4",10],["P5",30],["P3/P4",10]],type:"donut"}})}else{}}var barchartPosition,barchartOrg,barchartCountries;var barchartPositionTitle="Deployments by Position",barchartOrgTitle="Deployments by Gender",barchartCountriesTitle="Deployments by Level";$("#barcharts").append('<div class="barchart"><div><h3>'+barchartPositionTitle+'</h3><div id="barchartPosition"></div></div>');$("#barcharts").append('<div class="barchart"><div><h3>'+barchartOrgTitle+'</h3><div id="barchartOrg"></div></div>');$("#barcharts").append('<div class="barchart"><div><h3>'+barchartCountriesTitle+'</h3><div id="barchartCountries"></div></div>');function generateBarChart(){barchartPosition=c3.generate({bindto:"#barchartPosition",size:{width:250,height:200},data:{x:"x",columns:[["x","IMO","HAO","Education Officer","GBV Specialist"],[413,233,123,90]],type:"bar"},axis:{rotated:true,x:{type:"category",tick:{outer:false}},y:{tick:{outer:false,format:d3.format(".2s"),count:5}}}});barchartOrg=c3.generate({bindto:"#barchartOrg",size:{width:250,height:200},data:{x:"x",columns:[["x","IMO","HAO","Education Officer","GBV Specialist"],[413,233,123,90]],type:"bar"},axis:{rotated:true,x:{type:"category",tick:{outer:false}},y:{tick:{outer:false,format:d3.format(".2s"),count:5}}}});barchartCountries=c3.generate({bindto:"#barchartCountries",size:{width:250,height:200},data:{x:"x",columns:[["x","IMO","HAO","Education Officer","GBV Specialist"],[413,233,123,90]],type:"bar"},axis:{rotated:true,x:{type:"category",tick:{outer:false}},y:{tick:{outer:false,format:d3.format(".2s"),count:5}}}})}function hxlProxyToJSON(input){var output=[];var keys=[];input.forEach(function(e,i){if(i==0){e.forEach(function(e2,i2){var parts=e2.split("+");var key=parts[0];if(parts.length>1){var atts=parts.splice(1,parts.length);atts.sort();atts.forEach(function(att){key+="+"+att})}keys.push(key)})}else{var row={};e.forEach(function(e2,i2){row[keys[i2]]=e2});output.push(row)}});return output}function createKeyFigure(target,title,className,value){var targetDiv=$(target);return targetDiv.append("<div class='key-figure'><div class='inner'><h3>"+title+"</h3><div class='num "+className+"'>"+numFormat(value)+"</div></div></div></div>")}var numFormat=d3.format(",");const DATA_URL="https://proxy.hxlstandard.org/api/data-preview.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1exDoZsA8UQx-U5YGSS4zxivfPIOUf8-ts2CbavV7Mvg%2Fedit%23gid%3D255428484&format=csv";let isMobile=$(window).width()<600?true:false;let geoDataURL="data/worldmap.json";let geomData,sbpData;$(document).ready(function(){function getData(){Promise.all([d3.json(geoDataURL),d3.csv(DATA_URL)]).then(function(data){geomData=topojson.feature(data[0],data[0].objects.geom);sbpData=data[1];initMap();createKeyFigure("#keyfig","Deployments","className",768);createKeyFigure("#keyfig","Duty Stations","className",249);createKeyFigure("#keyfig","Countries","className",138);generatePieChart();generateBarChart();drawLeftChart();$(".loader").hide();$("main, footer").css("opacity",1)})}function drawMap(){var width=$("#map").width();var height=400;var mapScale=width/3.5;var mapCenter=[75,8];var projection=d3.geoMercator().center(mapCenter).scale(mapScale).translate([width/2,height/2]);var path=d3.geoPath().projection(projection);mapsvg=d3.select("#map").append("svg").attr("width",width).attr("height",height);mapsvg.append("rect").attr("width","100%").attr("height","100%");g=mapsvg.append("g").selectAll("path").data(geomData.features).enter().append("path").attr("class","map-regions").attr("id",function(d){return d.properties.ISO_A3}).attr("d",path).attr("fill","#CCC")}var zoom,g,mapsvg,markerScale;function initMap(){setTimeout(function(){drawMap()},100)}function initTracking(){let MIXPANEL_TOKEN="";mixpanel.init(MIXPANEL_TOKEN);mixpanel.track("page view",{"page title":document.title,"page type":"datavis"})}getData()})},{}]},{},[1]);
